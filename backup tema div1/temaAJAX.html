<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Tema AJAX </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="temaAJAX.css" />
    <!--<script src="temaAJAX.js"></script>-->
    <script>

    function loadVremeaAcum(){
        var loc="";
        var loc=document.getElementById("location").value;
        var xhttp = new XMLHttpRequest(); //initializeaza obiectul
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200){ 
                    //console.log(this.responseText);//raspunsul care l-a dat serverul
                   var vremeaAcum = JSON.parse(this.responseText);
                   
                   var descr = vremeaAcum.weather["0"].description;  
                   var umid = vremeaAcum.main.humidity;
                   var press = vremeaAcum.main.pressure;
                   var tCrt = vremeaAcum.main.temp;
                   var tMin = vremeaAcum.main.temp_min;
                   var tMax = vremeaAcum.main.temp_max;

                   var image=vremeaAcum.weather["0"].icon;
                  // var url= "http://openweathermap.org/img/w/"+image+".png";
                  //  console.log(url);


                   //umid=vremeaAcum.main[humidity];
               /* var str="";
                for (var i in vremeaAcum.main) {
                // console.log(i, vremeaAcum.main[i]);
           
                   str+= ` <li> 
                        </span>
                        <span class="descriere"> ${i} </span>
                        <span class="value"> ${vremeaAcum.main[i]}</span>
                        </li>` 
                } */
               
      //      document.getElementById("containerVremeaAcum").innerHTML=str;
            document.getElementById("getLocation").innerHTML=loc;
            document.getElementById("descr").innerHTML=descr;
            document.getElementById("umid").innerHTML=umid;
            document.getElementById("press").innerHTML=press;
            document.getElementById("tCrt").innerHTML=tCrt;
            document.getElementById("tMin").innerHTML=tMin;
            document.getElementById("tMax").innerHTML=tMax;
            document.getElementById("image").src ="http://openweathermap.org/img/w/"+image+".png";

           /* function myMap() {
                var mapProp= {
                 center:new google.maps.LatLng(51.508742,-0.120850),
                 zoom:5,
                };
                var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
            }*/
         
            }
        };
        xhttp.open("GET", "https://api.openweathermap.org/data/2.5/weather?appid=69518b1f8f16c35f8705550dc4161056&units=metric&q="+loc, true);
        xhttp.send();
    } 
    
    function loadPrognoza(){
        var loc="";
        var loc=document.getElementById("location").value;
        var xhttp = new XMLHttpRequest(); //initializeaza obiectul
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200){ 
                 
                   var vremeaAcum = JSON.parse(this.responseText);
                 
            }
        };
        xhttp.open("GET", "https://api.openweathermap.org/data/2.5/weather?appid=69518b1f8f16c35f8705550dc4161056&units=metric&q="+loc, true);
        xhttp.send();
    } 
    </script>



</head>
<body>
    <div class="div">   
            <input type="text" class="input" id="location">
            <button class="button" onclick="loadVremeaAcum()">Afiseaza vremea</button> 
            <button class="button" onclick="loadPrognoza()">Afiseaza prognoza</button> 
     
    </div>
    <br>
    <div class="div">
        <h1>Vremea acum <span id="getLocation"></span> </h1>
        <hr/>
             <ul id="descriere">
                <li > 
                <img id="image" scr="http://openweathermap.org/img/w/" ><br>
                <span class="Descriere">Descriere:</span> <span id="descr"> </span> <br>
                <span class="Descriere"> Umiditate:</span> <span id="umid"> </span>  <br>
                <span class="Descriere"> Presiune:</span> <span id="press"> </span>  <br>
                <span class="Descriere"> Temperatura curenta:</span> <span id="tCrt"> </span> <br>
                <span class="Descriere"> Minima zilei:</span> <span id="tMin"> </span>  <br>
                <span class="Descriere"> Maxima zilei:</span> <span id="tMax"> </span> <br>
                </li>
            </ul> 
 
         <!--  <ul id="containerVremeaAcum">
                <li class="dreapta"> 
                <span class="dreapta"> </span> <span class="value"> </span> <br>
                </li>
            </ul> 
            <div id="googleMap" style="width:50%;height:200px;"></div>-->
    </div>
    
    <div class="div">
        <h1>Vremea in urmatoarele zile </h1>

        <hr/>
        <table border="1" style="width:70%">
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td>6</td>
            </tr>
            <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                    <td>6</td>
            </tr>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td>6</td>
            </tr>
            <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                    <td>6</td>
            </tr>
            <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                    <td>6</td>
            </tr>
            <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
            </tr>
            <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                    <td>6</td>
            </tr>
            <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>5</td>
                        <td>6</td>
            </tr>
            <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                    <td>6</td>
        </tr>
        </table>

    </div>
   </body>
</html>